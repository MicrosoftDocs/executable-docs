---
title: 'Quickstart: Create a Linux VM and SSH into it using Azure CLI'
description: 'This guide demonstrates how to create a Linux virtual machine on Azure using Azure CLI, retrieve its public IP address, and then connect via SSH. All steps are automated using environment variables with unique random suffixes where needed.'
ms.topic: quickstart
ms.date: 10/20/2023
author: ChatGPT
ms.author: chatgpt
ms.custom: innovation-engine, azurecli, linux-related-content
---

# Quickstart: Create a Linux VM and SSH into it using Azure CLI

This Exec Doc walks you through the process of deploying a Linux virtual machine on Azure using Azure CLI. You will create a resource group, deploy an Ubuntu VM with generated SSH keys, and then retrieve the public IP address so you can SSH into the VM. Note that this guide does not include commands for logging into Azure or setting subscriptions. Make sure you are already logged in and your desired subscription is active.

## Step 1: Create a Resource Group

In this section, we set up environment variables and create an Azure resource group in the WestUS2 region. A random suffix is appended to the resource group name to ensure uniqueness with every deployment.

```bash
export RANDOM_SUFFIX=$(openssl rand -hex 3)
export RESOURCE_GROUP="linuxVmGroup$RANDOM_SUFFIX"
export REGION="WestUS2"
az group create --name $RESOURCE_GROUP --location $REGION
```

Results:

<!-- expected_similarity=0.3 -->

```JSON
{
  "id": "/subscriptions/xxxxx-xxxxx-xxxxx-xxxxx/resourceGroups/linuxVmGroupxxxxx",
  "location": "WestUS2",
  "managedBy": null,
  "name": "linuxVmGroupxxxxx",
  "properties": {
    "provisioningState": "Succeeded"
  },
  "tags": null,
  "type": "Microsoft.Resources/resourceGroups"
}
```

## Step 2: Create the Linux Virtual Machine

Now we deploy a Linux VM using the Ubuntu LTS image. A unique virtual machine name is generated by appending the same random suffix. The command automatically generates SSH keys and sets "azureuser" as the default administrator username.

```bash
export VM_NAME="linuxVM$RANDOM_SUFFIX"
az vm create --resource-group $RESOURCE_GROUP --name $VM_NAME --image UbuntuLTS --admin-username azureuser --generate-ssh-keys
```

Results:

<!-- expected_similarity=0.3 -->

```JSON
{
  "fqdns": "",
  "id": "/subscriptions/xxxxx-xxxxx-xxxxx-xxxxx/resourceGroups/linuxVmGroupxxxxx/providers/Microsoft.Compute/virtualMachines/linuxVMxxxxx",
  "location": "WestUS2",
  "macAddress": "xx:xx:xx:xx:xx:xx",
  "powerState": "VM running",
  "privateIpAddress": "10.0.0.4",
  "publicIpAddress": "xx.xx.xx.xx",
  "resourceGroup": "linuxVmGroupxxxxx",
  "zones": ""
}
```

## Step 3: Retrieve the Public IP Address

To connect to your VM via SSH, you need its public IP address. The following command fetches the public IP details of your VM:

```bash
az vm list-ip-addresses --resource-group $RESOURCE_GROUP --name $VM_NAME --output table
```

Results:

<!-- expected_similarity=0.3 -->

```console
Name         ResourceGroup       PrivateIpAddresses    PublicIpAddresses
-----------  ------------------  --------------------  ----------------
linuxVMxxxxx  linuxVmGroupxxxxx   10.0.0.4              xx.xx.xx.xx
```

## Step 4: SSH into Your Linux VM

With the public IP address in hand, you can now establish an SSH connection to your Linux VM. Open your terminal and run the following command (replace xx.xx.xx.xx with the public IP address retrieved in the previous step):

ssh azureuser@xx.xx.xx.xx

This command will initiate an SSH session with the Linux VM. If prompted to accept the host key, type "yes" and continue.

Happy learning and exploring your new Azure Linux VM!